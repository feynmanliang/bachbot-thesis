\chapter{Large-scale subjective evaluation}
\begin{savequote}[75mm]
  What can we say about the perception of music by the silent majority of
  listeners, those for whom music is written but who neither create music nor
  can articulate their musical experience? How do they acquire their
  demonstrably sophisticated intuitions about music patterns
  typical of their culture? Experiments in the cognitive psychology of music
  have cast some light on the first question. Recent developments in neural net learning
  now enables us to explore the second.
  \qauthor{\citet{bharucha1989modeling}}
\end{savequote}


% **************************** Define Graphics Path **************************
\ifpdf
    \graphicspath{{Chapter6/Figs/Raster/}{Chapter6/Figs/PDF/}{Chapter6/Figs/}}
\else
    \graphicspath{{Chapter6/Figs/Vector/}{Chapter6/Figs/}}
\fi

Many prior studies \citep{Eck2002-blues,Allan2005,Boulanger-Lewandowski2012,Lyu2015}
evalute their success using either log likelihood or self-assessing
some generated samples.

\citep{pearce2001towards} addresses difficulty in quantitative evaluation,
suggesting the use of a learned critic in a manner similar to generative
adversarial networks \citep{goodfellow2014generative}. In a later report,
\citep{pearce2002motivations} attribute difficulty in evaluation due to lack
aim: algorithmic composition, design of compositional tools, and computational
modelling of musical styles or music cognition all have different motivations
and should thus be evaluated differently.

Following advice of \citep{pearce2002motivations}, we identify our research
motivation as building ``computational models'' for musical style and cognition.
Specifically, our goal is to build a model which composes music in a style
that is perceptually indistinguishable from Bach.
To evaluate our results, we adapt Alan Turing's proposed ``Imitation Game''
\citep{turing1950computing} and carry out a large-scale musical Turing test.

\citep{ariza2009interrogator} criticizes a musical Turing test as providing little data about
how to improve the system, suggesting that listener studies using music experts
may be more insightful.

\section{Evaluation framework design}

\subsection{Software architecture}

The frontend utilizes React and Redux, allowing us to collect fine-grained user
action data. Azure App Service is used to host an Express web-service which
randomizes experimental questions and collects responses. The data is stored to
Azure Data Storage and processed in batch MapReduce using Azure HDInsight.

\subsection{User interface}

The landing page for \url{http://bachbot.com/} is shown in \cref{fig:bachbot-front-page}.

\begin{figure}[tb]
  \centering
  \includegraphics[width=1.0\linewidth]{bachbot-front-page.png}
  \caption{The first page seen by a visitor of \url{http://bachbot.com}}
  \label{fig:bachbot-front-page}
\end{figure}

Clicking ``Test Yourself'' redirects the participant to a user information form
(\cref{fig:user-info-form}) where users self-report their age
group prior music experience into the categories shown.

\begin{figure}[tb]
  \centering
  \includegraphics[width=1.0\linewidth]{user-info-form.png}
  \caption{User information form presented after clicking ``Test Yourself''}
  \label{fig:user-info-form}
\end{figure}

After submitting the background form, users were redirected to the question
response page shown in \cref{fig:question-screen}. This page contains two
audio samples, one extracted from Bach and one generated by BachBot, and users
were asked to select the sample which sounds most similar to Bach. Users were
asked to provide five consecutive answers and then the overall percentage
correct was reported.

\begin{figure}[tb]
  \centering
  \includegraphics[width=1.0\linewidth]{question-screen.png}
  \caption{Question response interface used for all questions}
  \label{fig:question-screen}
\end{figure}

\subsection{Question generation}

Questions were generated for both harmonizations (using the same abbreviations
as defined in \mynote{ref}) as well as original compositions (denoted SATB as all parts
are generated). For each question, a random chorale was selected without
replacement from the corpus and paired with a corresponding harmonization.
SATB sampls were paired with chorales randomly sampled from the corpus. The
five question answered by any given participant were comprised of one S/A/T/B
question chosen at random, one AT question, one ATB question, and two original
compositions. See \cref{tab:bachbot-com-question-distribtion} for details.

\begin{table}[tb]
  \centering
  \begin{tabular}{lrr}
    \toprule
    Question type & \# questions available & Expected \# responses per participant \\
    \midrule
    S        & 2  & 0.25 \\
    A        & 2  & 0.25 \\
    T        & 2  & 0.25 \\
    B        & 2  & 0.25 \\
    AT       & 8  & 1 \\
    ATB      & 8  & 1 \\
    SATB     & 12 & 2 \\
    \bottomrule
  \end{tabular}
  \caption{Composition of questions on \url{http://bachbot.com}}
  \label{tab:bachbot-com-question-distribtion}
\end{table}

\subsection{Promoting the study}

We promoted the study through solely through social media and personal
contacts. Participation was voluntary and growth was organic; we did not
solicit any paid responses or advertising. We found that $52.1\%$\todo{UPDATE}
of participants were referred from social media, $4.8\%$ through other websites
and blogs, $2\%$ through search engine results, and the remaining $41.2\%$ had
directly accessed \url{bachbot.com},

\section{Results}

\subsection{Participant backgrounds and demographics}

\mynote{Update with most recent results before submitting}
We recieved a total of $695$\todo{UPDATE} participants from \todo{UPDATE}
different countries. After selecting only the first response per IP address and
filtering down to participants whom had listened to both choices in every
question, we are left with $657$\todo{UPDATE} participants answering
$5$ questions each to yield a total of $3285$\todo{UPDATE} responses.

As evidenced by \vref{fig:user-geographics}, our participant is diverse and
includes participants from six different continents.
\vref{fig:user-demographics} shows that while the majority of our participants
are between $18-45$\todo{UPDATE} and have played an instrument, more than
$23.7\%$\todo{UPDATE} have either formally studied or taught music theory.

\begin{figure}[p]
  \centering
  \begin{subfigure}[b]{0.98\textwidth}
    \centering
    \includegraphics[width=0.85\linewidth]{participants-by-country.png}
  \end{subfigure}
  \begin{subfigure}[c]{0.55\textwidth}
    \centering
    \input{Chapter6/Figs/user-demographics-pie.pgf}
  \end{subfigure}
  \begin{subfigure}[c]{0.44\textwidth}
    \centering
    \input{Chapter6/Figs/user-countries.tex}
  \end{subfigure}
  \caption{Geographic distribution of participants}
  \label{fig:user-geographics}
\end{figure}

\begin{figure}[tb]
  \centering
  \input{Chapter6/Figs/responses-ageGroup-musicExperience.pgf}
  \caption{Demographics of participants}
  \label{fig:user-demographics}
\end{figure}

\subsection{BachBot's performance results}

\mynote{Average time per response, average number plays/replays}

\mynote{\cref{fig:responses-mask} suggests performance is weakest on
  harmonizations. Unsurprising because we only do 1-best and don't account
  for future. Bidirectional LSTM or N-best lattice search (reference marcin)
  would do better}

\cref{fig:responses-mask} shows the performance of BachBot on various question
types. It shows that $59\%$\mynote{VERIFY LAST} of participants could correctly
identify original Bach from BachBot's generated music. As the baseline method
of randomly guessing between the two choices in \cref{fig:question-screen}
achieves $50\%$, our findings suggest that {\bf the average participant has only a
$9\%$\mynote{VERIFY LAST} better chance than randomly guessing when
distinguishing Bach from BachBot correctly}.

\mynote{Collins only uses expert evaluators} In comparison, a recently
published comparable system for generating Bach-styled music found that
$20\%$ of its evaluators were able to discriminate significantly better than chance.

\begin{figure}[tb]
  \centering
  \input{Chapter6/Figs/responses-mask.pgf}
  \caption{responses-Mask}
  \label{fig:responses-mask}
\end{figure}

\cref{fig:responses-mask} also shows that participants had more trouble
discriminating entire compositions (SATB) than harmonizations (AT, ATB) where a
subset of the parts have already been given. While this may seem
counterintuitive, recall that the model in \mynote{reference} is uni-directional
and does not account for any future constraints on other parts. We made
this design decision intentionally because one of our requirements was sampling
the model for novel compositions. However, since harmonization tasks provide
the full past and future context for other parts, they effectively impose constraints
on LSTM hidden state dynamics. We expect methods which account for both future and past
context (\eg using the output sequence from a bidirectional RNN\mynote{cite} inputs)
to mitigate this problem, which we leave for future work.

When only a single part is composed by BachBot, we find the results vary significantly
across different parts. Composing the soprano part proved to be the easiest to
discriminate, an unsurprising result given that in chorale style music soprano parts
are responsible for the melody\mynote{cite}. Composing the alto and tenor parts achieved
similar performance as composing all four parts, a result which may also be caused by
not accounting for future constraints on model outputs. Removing the bass proved
to be the most perceptually difficult to discern from real Bach.

In \cref{fig:responses-mask-musicExperience}, responses are further segmented
by music experience. Unsurprisingly, we find that the proportion of correct responses
correlates positively with experience.

\mynote{Comment more about these figures in captions}
\mynote{Mark: Surprising that that new bass is so successful. Worthy of discussion.}
\begin{figure}[tb]
  \centering
  \input{Chapter6/Figs/responses-mask-musicExperience.pgf}
  \caption{Proportion of correct responses for each question type and music experience level.}
  \label{fig:responses-mask-musicExperience}
\end{figure}

\begin{figure}[tb]
  \centering
  \input{Chapter6/Figs/responses-mask-agegroup.pgf}
  \caption{Proportion of correct responses for each question type and age group.}
  \label{fig:responses-mask-agegroup}
\end{figure}

\begin{figure}[tb]
  \centering
  \input{Chapter6/Figs/responses-name.pgf}
  \caption{Proportion of correct responses broken down by individual questions.}
  \label{fig:responses-name}
\end{figure}

\cref{fig:responses-name} shows the proportion correct for each question.
Encouragingly, it shows that $41.7\%$\mynote{VERIFY LAST} of the SATB pairs were not
statistically different than baseline, suggesting that \textbf{while not always
consistent BachBot is capable of composing music which the average participant
cannot discern from actual Bach}.

\mynote{Have Mark analyze bad examples in \cref{fig:responses-name}}

\section{User feedback}

In this section, we showcase some of the particularly helpful feedback we
received from our users and observe that some common themes are present
among the features participants used to discriminate synthetic from original Bach.

Most critically, we found that lack of convincing phrasing to be one of the most
cited difference between BachBot and real Back:

\begin{quote}
  The modulations and part writing were the giveaway for me (and once or twice the phrasing)
\end{quote}

\begin{quote}
  Got 5/5. The trick is to listen for the unnatural pauses at regular intervals.
\end{quote}

\begin{quote}
  Cool project, I scored 100\% so I'm quite pleased with myself ;o) I do
  play an instrument although I'm not classical trained. If I had an
  inkling to why I could choose the background phrasing of the Bach
  pieces is far more elegant than the computer generated pieces.
\end{quote}


\begin{quote}
  really impressive! If I didn't know about counterpoint that quiz would've stumped me
\end{quote}

We also found that certain participants who have studied Bach chorales could recognize
certain scores despite normalizing key and tempo:
\begin{quote}
  [BWV-248.5 ATB]
  \#2: there was a first inversion at a strong cadence point that just wasn't
  credible in the non-Bach clip (of course I am sure you can point to a piece
  of Bach that does end on a first inversion!)

  [BWV-248.5 ATB]
  \#3: this was the hardest one to judge in my opinion. I went on gut feeling
  of the first section, before the very slow part that I suspect may be an
  artefact of the tempo normalisation that you have done. Were there perhaps
  fewer open chords in the genuine Bach?

  [BWV-11.6 B]
  \#4: the harmony felt quit wrong in this one - too many weird chromatic
  harmonies and semitone clashes even for JSB and it ended in the wrong key.

  [BWV-436 SATB]
  \#5: this one I found quite easy, partly because I recognised it, but also
  because the algorithm was perhaps trying to be too clever and turn too many
  harmonic corners in too quick a succession

  Further, although I couldn't quote BWV numbers to you, I recognised samples 2
  and 5, though the performance of \#2 in particular seemed highly ornamented
  and embellished.

  The whole thing is really quite impressive overall though\ldots
\end{quote}

\section{Competitive analysis of large-scale evaluation methodologies}

\mynote{Breakdown costs of Azure CDN, App Service, BlobStore. Most expensive was domain registration}

\mynote{Compare costs and quality with MTurk}

Higher quality. Music experts are not usually doing tasks on MTurk, but would
be very interested in an open-source research project. In contrast, $20\%$
\mynote{UPDATE THIS NUMBER} of our participants have either formally studied
or taught music theory.

\begin{quote}
Payments on MTurk are suggested to follow a reasonable hourly rate, with an
example of \$8 per hour or about 13c per minute. In practice, many mTurk
tasks pay much less overall, with the median study paying just 5-10c for a task
taking ``a few minutes,'' like watching and providing feedback on 3 short
(15-second) videos, summarizing a website, and evaluating hypothetical and real
market products. Indeed, ``wages'' this low have been shown to result in lower
quality output than could be had for no payment at all, by pure volunteers.
\end{quote}
\citep{downs2010your}

MTurk is also crestricted to US participants only\cite{quick2014kulitta}.

Paid service providers cost anywhere from \$20 to \$55 per month
just for authoring tools and server space\citep{JCC4:JCC411} At the time of writing,
paid responses cost \$1.50--\$3.00 on SurveyMonkey \citep{uksurveymonkey}.
